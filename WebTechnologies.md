# Web Technologies

## Directory

**[HTTP](#HTTP)**<br>
**[URLs](#URLs)**<br>
**[REST](#REST)**<br>
**[HTTP Headers in Depth](#HTTP-Headers-in-Depth)**<br>
**[Cookies](#Cookies)**<br>
**[Status Codes](#Status-Codes)**<br>
**[HTTPS](#HTTPS)**<br>
**[HTTP Proxies](#HTTP-Proxies)**<br>
**[]()**<br>
**[]()**<br>
**[]()**<br>

## HTTP

HTTP requests always have the same few elements in the first line. These are a verb that indicates the HTTP method, the next is the requested resource(URL), and finally is the HTTP Version used. Example below

    GET /test/myscript.php?q=123 HTTP/1.1

#### Interesting points of interest within a request:

    Referer: (misspelled intentionally) indicates the URL from which the request originated.

    User-Agent: information about the browser or client software. (Mozilla has been in nearly all since Netscape)

    Host: Specifies the hostname that appears in the full url. (In HTTP 1.1, Host is required)

    Cookie: Submits additional parameters that the server has issued to the client.

First Line of HTTP Responses include:

1. HTTP Version used.
1. Numerical Status Code (200, 404, 500, etc)
1. A textual "reason phrase" such as "ok"

#### Interesting points of interest within a HTTP Response:


HTTP has a few methods that can be used: (These are some but not all)

    GET         
        For retrieving resourse. Can be used to send parameters to requested resource in url query string. These URLS are displayed on screen and logged in various places (browser history, web server's access logs). Transmitted in the Referer header to other sites when external links are followed. (So don't use quesry strings for transmitting sensitive data).

    POST        
        Designed to perform actions. Request parameters cab both be sent in the URL query string and in the body of the message. Parameters will be excluded from logs and the Referer header.

    HEAD        
        Get request with no body. Can be used to check if a resource is present

    TRACE       
        Used for diagnostic purposes. Sends back exact same thing as the request to see if proxy changes anything.

    OPTIONS     
        Asks the server for HTTP methods available for a resource.

    PUT         
        Attempts to upload a specified resource to the server using the content contained in the body of the request. If method is enabled, then scripts may be uploaded and leveraged.

## URLs

Uniform Resource Locator

    protocol://hostname[:port]/[path/]file[?param=value]

The port number is optional and defaults to whatever the protocal specifies: 80 for HTTP, and 443 for HTTPS.

URLs may also be relative to a resource.

    /pathToScript/myScript.php

    test.ashx?uid=129

## REST

Representational state transfer (REST)

1. Requests and responses contain representations of the current state of the systemâ€™s resources
1. Rest-Style URLS usually means that instead of putting in queries within the query string, they are put in the file path.

    http://wahh-app.com/search?make=ford&model=pinto
    
    http://wahh-app.com/search/ford/pinto

## HTTP Headers In-depth

There are a lot of headers in HTTP, many may be used for attacking web applications. They are categorized into groups

### General Headers

- **Connection:** 
    - Tells the other end of the communication whether to close the TCP connection after HTTP transmission was done or stay open
- **Content-Encoding:** 
    - Specifies the encoding is being used such as gzip.
- **Content-Length:** 
    - Specifies length of message body in bytes (except with head requests)
- **Content-Type:**
    - Specifies type of content contained in body such as text/html
- **Transfer-Encoding:**
    - Specifies any encoding that was performed on the messege body. (Normally used to specify chunked encoding when employeds)

### Request Headers

- **Accept:**
    - Tells server what content client is willing to accept, like image types
- **Accept-Encoding:**
    - Tells server what kind of content encoding the client is willing to accept.
- **Authorization:**
    - Submits creds to the server for a built-in HTTP auth type
- **Cookie:**
    - Submits cookies to the server previously issued.
- **Host:**
    - Specifies hostname from the full URL
- **If-Modified-Since:**
    - Specifies last time browser recieved the resource, if the resource hasn't changed since that time, the server may instruct the client to use a cached copy.
- **If-None-Match:**
    - Specifies <i>entity tag</i> thich is an identifier that denoets the contents of the message body. The browser submits the entity tag that the server issued with the requested resource when it was last received. The server then uses the tag to find out if the browser can use a cached copy.
- **Origin:**
    - Used in cross-domain AJAX requests to specify which site the request originated.
- **Referer:**
    - Specifies URL from where the request originated.
- **User-Agent:**
    - Provides info on the browser.

### Response Headers

- **Access-Control-Allow-Origin:**
    - Indicates whether resource can be retrieved from a cross-domain AJAX request.
- **Cache-Control:**
    - Passes caching directives to the browser.
- **ETag:**
    - Entity Tag. Clients can submit the identifier in the future for the same resource in the If-None-Match header to notify the server which version of the resource the browser has.
- **Expires:**
    - Tells the browser how long the contents of the message body are valid for. Thus the browser could use a cached version until that time.
- **Location:**
    - Used in redirection responses (the ones that are 3xx) to specify the target of the redirect.
- **Pragma:**
    - Gives caching directives to the browser (no-cache)
- **Server:**
    - Provides info about the web server software used.
- **Set-Cookie:**
    - Issues cookies to the browser that it will submit back to the server in later requests.
- **WWW-Authentication:**
    - Used in responses that have a 401 status code to provide details on the type(s) of auth that the server supports.
- **X-Frame-Options:**
    - Indicates whether and how the current response may be loaded within a browser frame.

## Cookies

The cookie mechanism enables the server to send items of data to the client, which the client then submits back to the server in requests.

Cookies are a unique type of parameter that will be resubmitted in each subsequent request without any action required.

For a server to issues a cookie, it will use a Set-Cookie response header

    Set-Cookie: tracking=oAjNrgaSo83aSdfgagr3

The user that recieves this cookie will automatically add the following header to subsequent requets back to the same server.

    Cookie: tracking=oAjNrgaSo83aSdfgagr3

Cookies normally follow a certain format that goes by a name/value pair. Multiple cookies can be issued together, they will be in the same response header with each cookie being seperated by a semicolon.

Cookies also can have optional attributes:

- **expires:**
    - Sets date until the cookie is valid. This means that the browser will store until the cookie is no longer valid. If this isn't used, then the cookie is defaulted to the browser session.
- **domain:**
    - Specifies the domain for which the cookie is valid. This must be the same or a parent of the domain from which the cookie was received.
- **path:**
    - Specifies URL path for which cookie is valid
- **secure:**
    - If attribute is set, the cookie will only be sent via HTTPS
- **HttpOnly:**
    - If attribute is set, the cookie cannot be directly accessed via client-side JavaScript.

## Status Codes

Every HTTP response must contain a status code in its first line. There are five categories of status code:

- 1xx: Informational
- 2xx: Request was successful
- 3xx: Client was redirected to different resource
- 4xx: Request contains error
- 5xx: Server encountered error

There are some common status code that are useful

- 100 Continue
    - Sent in some circumstances when a client submits a request containing a body.
- 200 OK
    - Indicates the request was successful and that the request body contains the result of the request.
- 201 Created
    - Returned in response to a PUT request to indicate that the request was successful.
- 301 Moved Permanently
    - Redirects browser permanently to a different URL, which is specified in the Location header. The Client should use the new URL in the future over the original
- 302 Found
    - Redirects the browser temporarily to a different URL, specified in the Location header. The client should revert to the original URL in the future.
- 304 Not Modified
    - Instructs browser to use its cached copy of the requested resource.  The server uses the If-Modified-Since and If-None-Match request headers to determine whether the client has the latest version of the resource.
- 400 Bad Request
    - Indicates that the client submitted an invalid HTTP request.
- 401 Unauthorized
    - Indicates that the server requires HTTP Auth. The WWW-Authentication header contains details on the type of auth supported.
- 403 Forbidden
    - Indicates that no one is allowed to access the resource.
- 404 Not Found
    - Indicates that the requested resource doesn't exist.
- 405 Method Not Allowed
    - Indicates that the method used in the request is not supported for the URL.
- 413 Request Entity Too Large
    - If probing for buffer overflows in native code, the submitted string may be too long and you will get this.
- 414 Request URI Too Long
    - URL is too long to process.
- 500 Internal Server Error
    - Indicates that the server encountered an error. Usually caused by giving unexpected input that caused an unhandled error within the application's proccess. (read response this carefully for details indicating nature of error)
- 503 Service Unavailable
    - Normally means that the web server isn't responding to requests. (You should verify that you didn't cause this)


## HTTPS

This is HTTP with encryption. The encryption is TLS, but is often called by the technology previously used which is SSL. That's why you often see SSL/TLS.

 




